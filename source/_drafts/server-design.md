## 高同步即时服务器设计要点

source：https://www.youtube.com/watch?v=hiHP0N-jMx8

### 上传速率与下载速率（Package/s）

通常来说上行速率会大于下行速率（因为多人的游戏环境下，下行的数据包量更大）

较高的上下行速率可以减少Package丢失带来的不利影响

较低的速率除了导致Package丢失的影响增大外，还可能导致 Super Bullet 等现象

### 服务器模拟速率（Tick Rate）

TickRate 的大小一定程度上决定了服务器能够向client发送数据的速率的最大值

提高 TickRate 可以提高服务器发送数据的上限，但是也会导致服务器处理数据的窗口（Processing Window）变小，这要求服务器具有更快的数据处理能力。

比如，60 的 TickRate 对应的 Processing Window 大小为 16.66ms，如果不能及时地在该 16.66ms 的时间段内处理完数据并发送，那么将造成所有玩家出现大量的数据错误现象。

### 死亡削除

从低延迟玩家发来的对其他角色死亡判定可以削除那个角色之后发来的其他操作

### 低延迟与高延迟玩家竞争问题

高延迟玩家对低延迟玩家的操作（在低延迟玩家视角）可能会表现地滞后（比如低延迟玩家已经抵达掩体之后仍然受伤），这导致高延迟玩家会影响低延迟玩家的游戏体验

一些简单粗暴的方式可以处理这种场合，比如Region Lock（锁区）或者强行踢出ping过于高的玩家，但是这会对全球性的游戏业务和社区中产生坏影响

一种方式是对高ping玩家采用不同的鉴权措施：当玩家的ping值高于一定值的时候，他的客户端判定模式会从客户，服务器确认（client side,server authoritative）模式切换为完全服务器侧（fully server side）

### 网络联机模式选择

#### Dedicated Server

#### Client Hosted

#### Peer to Peer

最常出现在1v1格斗游戏中，也有参加者超过2人的情况

